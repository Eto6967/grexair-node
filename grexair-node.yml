# This file is auto-generated by openmediavault (https://www.openmediavault.org)
# WARNING: Do not edit this file, your changes will get lost.

# grexair-node
# 

services:
  greexair-app:
    build:
      context: ./GreexAir
      dockerfile: Dockerfile
    container_name: greexair-app
    dns:
      - 8.8.8.8
      - 1.1.1.1
    environment:
      - DB_URL=${DB_URL}
      - TZ=Europe/Budapest
    ports:
      - "80:5000"
    restart: always

  # EZ AZ ÚJ RÉSZ AZ ARDUINONAK
  greexair-uploader:
    build:
      context: ./GreexAir
      dockerfile: Dockerfile
    container_name: greexair-uploader
    dns:
      - 8.8.8.8
      - 1.1.1.1
    environment:
      - SERIAL_PORT=/dev/ttyUSB0  # Ide írd, ha esetleg /dev/ttyACM0 lenne!
    devices:
      - "/dev/ttyUSB0:/dev/ttyUSB0" # Bekötjük a fizikai USB portot a Dockerbe!
    # Fontos: Felülírjuk az alapértelmezett indítást, ez csak a feltöltőt futtatja!
    command: ["node", "uploader.js"]
    restart: always
